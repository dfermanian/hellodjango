/**
 * @name SimpleModal
 * @author Tom Coote (tomcoote.co.uk)
 * @version 2.0
 * @license released under the BSD (3-clause) licences
 */
var topWin=window;var SimpleModal=function(){var that={};that.open=function(url,height,width,callback){if(!window.SimpleModal.isController){if(typeof topWin.SimpleModal!=='object'){alert('Simple modals need the JavaScript available in the modal window itself.');}else{return topWin.SimpleModal.open(url,height,width,callback);}}
if(jQuery.browser.msie){$('select').css('visibility','hidden');}
var overflow=$(document.body).css('overflow').toLowerCase()||'visible';$(document.body).data('simpleModalOverflow',overflow);$(document.body).css('overflow','hidden');var mask=document.createElement('div'),eDiv=document.createElement('div');$(document.body).append(mask).append(eDiv);$(mask).addClass('_simpleModalMask').css({'position':'absolute','top':'0px','left':'0px','width':$(document).width()+'px','height':$(document).height()+'px','margin':'0px','padding':'0px','background-color':'#FFFFFF','opacity':0.8,'overflow':'hidden'});$(eDiv).addClass('_simpleModal').css({'height':height+'px','width':width+'px','padding':'0px','margin':'0px','border':'1px solid #ccc','position':'absolute','background-color':'#FFF','left':(($(window).width()/2)-(width/2))+$(document).scrollLeft()+'px','top':(($(window).height()/2)-(height/2))+$(document).scrollTop()+'px'}).append("<iframe frameborder='0' scrolling='no'></iframe>");$('iframe:first',eDiv).attr('src',url).css({'height':'100%','width':'100%','background-color':'#FFF','border':'none','overflow':'hidden'});that.callbacks.push(callback);return false;};that.close=function(data){if(!window.SimpleModal.isController){if(typeof topWin.SimpleModal!=='object'){alert('Simple modals need the JavaScript available in the top window.');}else{return topWin.SimpleModal.close(data);}}
$('div._simpleModal:last').remove();$('div._simpleModalMask:last').remove();if($('div._simpleModal').length<1){if(jQuery.browser.msie){$('select').css('visibility','visible');}
var overflow=$(document.body).data('simpleModalOverflow');if(overflow){$(document.body).css('overflow',overflow);}}
if(that.callbacks.length>0){var fn=that.callbacks.pop();if(typeof fn==='function'){fn(data);}}
return false;};that.isController=false;that.callbacks=[];return that;}();(function(){var previousTopWin;while(true){var ref;try{ref=topWin.parent.location.href;}
catch(err){ref=undefined;}
if(typeof ref==='undefined'||previousTopWin===topWin){break;}
else{previousTopWin=topWin;topWin=topWin.parent;}}
if(typeof topWin.SimpleModal==='object'){topWin.SimpleModal.isController=true;}}());